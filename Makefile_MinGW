SRCS = src\main.cpp

OBJ_DIR = src\obj

OBJS = $(patsubst src\\%.cpp,$(OBJ_DIR)\\%.o,$(SRCS))

CC = g++

COMPILER_FLAGS = -Wall

LINKER_FLAGS = -lmingw32 -lSDL2main -lSDL2 -lSDL2_image -lSDL2_ttf

EXE = run.exe

all : $(SRCS) $(OBJ_DIR) $(OBJS) submodules $(EXE)

$(OBJ_DIR) :
	mkdir $(OBJ_DIR)

$(OBJS) : $(OBJ_DIR)\\%.o : src\\%.cpp
	$(CC) $(COMPILER_FLAGS) -c $< -o $@

submodules :
	$(MAKE) -C src\grid
	$(MAKE) -C src\interface
	$(MAKE) -C src\pugixml

$(EXE) :
	$(CC) $(OBJ_DIR)\\*.o $(LINKER_FLAGS) -o $(EXE)

clean :
	del /Q $(EXE)
	rmdir /Q /S src\obj